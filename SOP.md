# 📋 每日运营剧本 (Daily SOP)

> **🚀 v5.1 Fixed Edition** - Feed流穿插 + 视频检测 + AI关键词扩展
> 
> 这是你每天早上工作的**唯一指南**。按顺序执行，不要跳步。

---

## 🌅 09:00 情报搜集 (The Scout) — Dashboard 流程

1. 打开 Dashboard: `http://localhost:3000` → 确认 WS Online。
2. 点击 **🕵️ Scout**，终端开始滚动日志。
3. 去喝咖啡，等待完成提示。

### 产出

- **日报文件**: `reports/daily_YYYY-MM-DD.md` （Dashboard 底部 **Daily Report** 标签页可直接预览）
- **题库文件**: `data/interview_questions.json` （Dashboard 底部 **Database** 标签页可直接预览）
- **内容**: 3 个关键词 × 3 篇笔记 + 2 次 Feed 推荐 (各1-2篇) = **约 12 篇笔记**
- **每篇包含**: 
  - 标题、作者、点赞数、标签
  - **📝 正文全文** (`full_text`)
  - **💬 Top 3 热评** (`hot_comments`)
  - **🧠 AI 智能分析** (提取核心面试题)

### 耗时
约 **8-12 分钟**（v5.1 优化时序：搜索间隔20-40s + Feed穿插）

### 🎯 心态
> 💡 **不要盯着看！** 挂后台运行，日志会实时推送到 Dashboard。

---

## ✍️ 09:20 实习生拆题

### 关键动作

1. **打开 Dashboard → Database 标签**：直接查看 `data/interview_questions.json`
2. **阅读日报摘要**：Dashboard → Daily Report 标签
3. **🔥 重点：阅读"💬 社区热议"板块**：
   - 评论区的追问往往是**最高价值的面试考点**
   - 例如：如果大家都在问"Embedding 维度是多少？"——这就是你笔记必须回答的问题
4. **挑选一题**：选择一个你感兴趣或有把握的知识点
5. **创建草稿**：

```bash
# 在 content/drafts/ 下创建
content/drafts/
├── today.md      ← 你的拆解文案
└── today.jpg     ← 配图 (必须同名!)
```

### 策略升级：回答评论区追问

> **核心竞争力**：你的笔记不仅回答"题目本身"，更要回答"评论区的追问"。
> 这是我们区别于普通搬运号的关键！

**示例**：
- 如果日报中评论区有人问：*"楼主，embedding 维度用的多少？"*
- 你的笔记里就必须专门写一段：**"关于 Embedding 维度的实战经验：我们组用的是 64 维，原因是..."**

### 写作模板

```markdown
# 实习日记：[知识点名称] 的工业落地细节

#搜广推 #算法实习 #推荐系统 #[相关标签]

今天看到一个面经问题：[问题描述]

## 面试 vs 实战

**面试常问：**
- [面试角度的问题]

**实战关注：**
- [工业界真实关注点]

## 评论区热议问题回答

> 💬 很多人都在问：[评论区高频追问]

我的理解是：[针对性回答，体现实战经验]

## 我的总结

[结合 AlgoQuest 知识点，写下你的理解]

---

💡 复习神器：用 AlgoQuest 整理的推荐系统知识树~
```

### 配图建议

- Cursor 代码截图
- 手写草稿照片
- AlgoQuest 界面截图
- **必须有"学习痕迹"！**

---

## 🎯 09:25 To AlgoQuest (生态联动)

> **核心价值**：把小红书抓取的"面试题"转化为你的私域流量池 —— AlgoQuest 题库

### 数据文件

每次运行 `index.ts` 后，自动生成：
- `data/interview_questions.json` - 结构化题库数据

### 关键动作

1. **打开 JSON 数据**：Dashboard → Database 标签（无需手动打开文件）
2. **挑选 1-2 道高质量问题**：
   - 优先选择 `hot_comments` 有追问的题目
   - 这些追问往往是面试官真正关心的细节
3. **录入 AlgoQuest 后台**：
   - 标题：使用 JSON 中的 `title`
   - 标签：使用 JSON 中的 `tags`
   - 内容：基于 `summary` 展开，补充你的理解
   - 社区追问：把 `hot_comments` 作为"常见变体问题"

### JSON 数据结构

```json
{
  "title": "美团推荐算法面经",
  "tags": ["美团", "推荐系统"],
  "summary": "...",
  "hot_comments": ["embedding维度是多少？", "负采样怎么做？"],
  "source_author": "小红书博主",
  "source_author_link": "https://...",
  "crawled_at": "2025-11-30"
}
```

### 价值闭环

```
小红书热门面经 → 抓取到 JSON → 录入 AlgoQuest → 积累私域题库 → 反哺内容创作
```

---

---

## 🚀 09:30 自动发布

### Dashboard 操作
1. 确认草稿已放在 `content/drafts/`（MD+同名图片）。
2. 打开 Dashboard，点击 **🚀 Publish**。
3. 观察终端日志，等待成功提示。

### 自动流程
1. 扫描 `content/drafts/` 目录
2. 读取 `.md` 文件 + 同名图片
3. 打开浏览器 → 上传图片 → 填写标题/正文/标签
4. 点击发布
5. 自动归档至 `content/published/`

### 注意事项

- ⚠️ 确保 **图片和 MD 同名**（如 `today.md` + `today.jpg`）
- ⚠️ 发布失败会截图保存至 `error_screenshot.png`

---

## 📊 10:00 复盘

### 检查清单

- [ ] 查看 `content/published/` 归档是否成功
- [ ] 打开小红书 APP 确认笔记已发布
- [ ] 记录今日发布的知识点（便于追踪成长）

### 如果发布失败

1. 检查 `error_screenshot.png` 分析原因
2. 可能原因：Cookie 过期、网络问题、选择器变化
3. 解决后重新运行 `npx tsx publisher.ts`

---

## 🔄 常用命令速查

| 场景 | 命令 |
|------|------|
| Cookie 过期 | `npx tsx login.ts` |
| 搜集情报 | `npx tsx index.ts` |
| 发布笔记 | `npx tsx publisher.ts` |
| 工具接口（list/search/detail/profile） | `npx tsx tool.ts listFeeds` |
| 测试 v5.0 功能 | `npx tsx test_v5_features.ts` |

---

## ⚙️ v5.1 新功能配置

### 环境变量 (可选)

```bash
# 复制模板
cp .env.example .env
```

编辑 `.env` 文件：
```env
# DeepSeek API 配置
DEEPSEEK_API_KEY=sk-your-deepseek-key
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat
```

> 💡 不配置 AI 也能运行，会跳过 AI 关键词扩展和智能分析

### v5.1 新增功能

| 功能 | 说明 | 触发条件 |
|------|------|---------|
| 📱 Feed流穿插 | 搜索间随机穿插2次Feed流浏览 | 自动触发 |
| 🎬 视频检测 | 自动识别视频笔记，模拟观看 | 遇到视频 |
| 🧠 AI关键词扩展 | DeepSeek 智能扩展搜索关键词 | 启动时 |
| 💬 评论抓取 | 提取热门评论 Top 3 | 每篇笔记 |
| 📅 日期日报 | 日报自动带日期命名 | 每次运行 |

---

## 📅 每周复盘

每周日花 15 分钟回顾：

1. **本周发布了几篇？** 目标：5-7 篇
2. **哪些知识点掌握了？** 记录到 AlgoQuest
3. **哪些笔记互动好？** 分析原因，优化选题

---

**核心心态**：不要为了发帖而发帖，要为了"我学会了"而发帖。

---

## 📢 引流金句 (Call to Action)

> 用于小红书笔记末尾，引导用户去 AlgoQuest 看完整版答案

### 金句 1：公式推导版
```
📚 详细的公式推导和代码实现放不下了...
去我的 AlgoQuest 搜【[题目名]】自取~
🔗 链接在主页置顶
```

### 金句 2：知识树版
```
💡 这道题其实是【推荐系统-召回策略-双塔模型】知识树的一个分支
完整的知识图谱在我的 AlgoQuest 里整理好了，需要的同学自取~
```

### 金句 3：实战代码版
```
🔥 想看完整的 PyTorch 实现？
我把代码放在 AlgoQuest 的【实战代码库】里了
点主页链接 → 搜索【[题目名]】→ 代码可以直接跑
```

### 使用策略

- **频率**：不要每篇都引流，3-5 篇引一次
- **时机**：内容确实有深度、评论区有追问时效果最好
- **真诚**：确保 AlgoQuest 上确实有对应的完整内容

---

---

## 📦 价值闭环图

```
┌─────────────────────────────────────────────────────────────┐
│                   v5.1 每日运营闭环                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   🔍 小红书热门面经                                       │
│          ↓                                                  │
│   🧠 DeepSeek 智能扩展关键词                              │
│          ↓                                                  │
│   🤖 index.ts 自动抓取 (8-12min)                          │
│       ├─ 📱 Feed流穿插 (随机2次)                          │
│       ├─ 🎬 视频检测 (模拟观看不记录)                     │
│       └─ 💬 评论抓取 Top3                                 │
│          ↓                                                  │
│   🗄️ interview_questions.json (增量去重)                  │
│          ↓                                                  │
│   ✅ 筛选 pending → 录入 AlgoQuest → 标记 imported         │
│          ↓                                                  │
│   ✍️ 生成笔记 + 引流话术                                  │
│          ↓                                                  │
│   🚀 publisher.ts 自动发布                                │
│          ↓                                                  │
│   📊 小红书流量 → AlgoQuest 用户增长                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

*Last Updated: 2025-12-03 (v5.1 Fixed Edition + Feed流/视频优化)*

---

## 🧪 测试验证

```bash
# 运行 43 项自动化测试，验证所有模块正常
npx tsx test_all.ts
```
